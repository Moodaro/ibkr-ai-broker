# Risk Policy Configuration for IBKR AI Broker
# This file defines risk limits and trading rules (R1-R8)
#
# Version: 1.0
# Last updated: 2025-12-26
# Environment: Paper Trading (Conservative Limits)

# KILL SWITCH - Set enabled=true to halt all trading
kill_switch:
  enabled: false
  reason: ""

# Risk Limits (R1-R8)
limits:
  # R1: Maximum notional value per order (USD)
  max_notional: 50000.00

  # R2: Maximum position size as percentage of portfolio
  max_position_pct: 10.0

  # R3: Maximum sector exposure percentage
  max_sector_exposure_pct: 30.0

  # R4: Maximum slippage in basis points (50 bps = 0.5%)
  max_slippage_bps: 50

  # R6: Minimum daily trading volume (shares/contracts)
  min_daily_volume: 100000

  # R7: Maximum number of trades per day
  max_daily_trades: 50

  # R8: Maximum daily loss (USD)
  max_daily_loss: 5000.00

# Trading Hours (R5)
trading_hours:
  allow_pre_market: false
  allow_after_hours: false
  market_open_utc: "14:30"  # 9:30 AM EST
  market_close_utc: "21:00"  # 4:00 PM EST

# Per-rule enable/disable toggles
rules_enabled:
  R1: true  # Max notional
  R2: true  # Max position %
  R3: true  # Max sector exposure
  R4: true  # Max slippage
  R5: true  # Trading hours
  R6: false # Min daily volume (disabled - not always enforceable)
  R7: true  # Max daily trades
  R8: true  # Max daily loss

# Advanced Risk Rules (R9-R12)
advanced_rules:
  # R9: Volatility-adjusted position sizing
  volatility_sizing:
    enabled: true
    max_position_volatility: 0.02  # 2% max portfolio risk per position
    min_position_size: 100.00
    max_position_size: 50000.00
    volatility_scaling_enabled: true

  # R10: Correlation exposure (placeholder)
  correlation:
    enabled: false
    max_correlated_exposure_pct: 30.0
    correlation_threshold: 0.7

  # R11: Drawdown protection
  drawdown_protection:
    enabled: true
    max_drawdown_pct: 10.0
    enable_drawdown_halt: true

  # R12: Time-of-day restrictions
  time_restrictions:
    enabled: true
    avoid_market_open_minutes: 10
    avoid_market_close_minutes: 10

# Feature Flags
feature_flags:
  auto_approval: false
  auto_approval_threshold: 1000.00
  enhanced_logging: true
  live_trading: false

# Monitoring & Alerts
monitoring:
  enable_health_checks: true
  health_check_interval_seconds: 60
  alert_on_risk_rejection: true
  alert_on_kill_switch_activation: true

# Notes:
# - These are conservative limits for paper trading phase
# - Review and adjust before enabling live trading
# - Always test changes in paper mode first
# - See LIVE_TRADING.md for pre-live checklist
